<!-- Helper Element for friends-page Element -->
<link rel='import' href='../../bower_components/polymer/polymer.html'>

<dom-module id='friend-classes'>
  <template>
    <iron-ajax
      id='classLoader'
      url='[[targetURL]]'
      headers='{{_makeHeaders()}}'
      params='[[_ajaxParams]]'
      handle-as='json'
      last-response='{{friendClasses}}'>
    </iron-ajax>
    <ul>
    <template is='dom-repeat' items='[[friendClasses.replyObject]]'>
      <li>[[item]]</li>
    </template>
    <ul>
  </template>
  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'friend-classes',
      _makeHeaders: function() {
        return document.getTokenHeader();
      },
      _getSelfRIN: function() {
        return document.getRIN();
      },
      _getAjaxParams: function() {
        return { friendRIN: this.friendRIN };
      },
      go: function() {
        console.log('Loading friend classes');
        this.$.classLoader.generateRequest();
      },
      properties: {
        _selfRIN: {
          type: String,
          computed: '_getSelfRIN()'
        },
        _ajaxParams: {
          type: Object,
          computed: '_getAjaxParams()'
        },
        friendRIN: {
          type: String,
          notify: true
        },
        targetURL: {
          type: String,
          notify: true
        },
        friendClasses: {
          type: Object,
          notify: true,
          value: {replyObject:['loading...']}
        }
      }
    });
  })();
  </script>
</dom-module>
